<!DOCTYPE html>
<html lang="en">
	<head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge"> <!-- as per bootstrap documentation -->
        <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- as per bootstrap documentation -->
		<title>NfSen-NG</title>
		<script src="js/dygraph.js"></script>
		<script src="js/jquery-3.2.1.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<link rel="stylesheet" type="text/css" href="css/dygraph.css" />
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css" />
		<link rel="stylesheet" type="text/css" href="css/customized.css" />
	</head>

	<body>
        <div id="viewDiv"class="clearfix">
            <ul id="viewList" class="nav nav-tabs pull-left">
                <li><a id="viewGraphsLink" onclick="changeActiveView(this)">Graphs</a></li>
                <li><a id="viewFlowsLink" onclick="changeActiveView(this)">Flows</a></li>
                <li><a id="viewStatsLink" onclick="changeActiveView(this)">Stats</a></li>
            </ul>
        </div><!-- viewDiv  -->

        <div id="filterDiv" class="container-fluid">

            <div id="graphsFilterDiv" class="row well well-sm">

                <div id="graphsFilterDateDiv" class="col-md-3">

                    <h3 class="text-center">Date</h3>

                    <div class="form-group">
                        <label for="startDate">From date :</label>
                        <input type="text" class="form-control" id="startDate">
                    </div>
                    <div class="form-group">
                        <label for="endDate">To date :</label>
                        <input type="text" class="form-control" id="endDate">
                    </div>

                    <button type="button" class="btn-primary">Last 24 hours</button>
                    <button type="button" class="btn-primary">Last week</button>
                    <button type="button" class="btn-primary">Last month</button>
                    <button type="button" class="btn-primary">Last year</button>

                </div><!-- graphsFilterDateDiv  -->

                <div id="graphsFilterProtocolDiv" class="col-md-3">

                    <h3 class="text-center">Protocols</h3>

                    <div class="checkbox">
                        <label><input type="checkbox" value="">TCP</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">UDP</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">ICMP</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">Others</label>
                    </div>

                </div><!-- graphsFilterProtocolDiv  -->

                <div id="graphsFilterDataTypeDiv" class="col-md-3">

                    <h3 class="text-center">Data Types</h3>

                    <div class="checkbox">
                        <label><input type="checkbox" value="">Flows</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">Packets</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">Traffic</label>
                    </div>
                </div><!-- graphsFilterDataTypeDiv  -->

                <div id="graphsFilterSourcesDiv" class="col-md-3">

                    <h3 class="text-center">Sources</h3>

                    <div class="form-group">
                        <select multiple class="form-control" id="sourceSelection">
                            <option value="swibi">swibi</option>
                            <option value="tiber">tiber</option>
                            <option value="blablabla">blablabla</option>
                            <option value="shouldComeFromTheServer">shouldComeFromTheServer</option>
                        </select>
                    </div>
                </div><!-- graphsFilterSourcesDiv  -->
            </div><!-- graphsFilterDiv  -->

            <div id="flowsFilterDiv" class="row well well-sm">

                <div id="flowsFilterDateDiv" class="col-md-3">

                    <h3 class="text-center">Date</h3>

                    <div class="form-group">
                        <label for="startDate">From date :</label>
                        <input type="text" class="form-control" id="startDate">
                    </div>
                    <div class="form-group">
                        <label for="endDate">To date :</label>
                        <input type="text" class="form-control" id="endDate">
                    </div>

                    <button type="button" class="btn-primary">Last 24 hours</button>
                    <button type="button" class="btn-primary">Last week</button>

                </div><!-- flowsFilterDateDiv  -->

                <div id="flowsFilterProtocolDiv" class="col-md-3">

                    <h3 class="text-center">Protocols</h3>

                    <div class="checkbox">
                        <label><input type="checkbox" value="">TCP</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">UDP</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">ICMP</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">Others</label>
                    </div>

                </div><!-- flowsFilterProtocolDiv  -->

                <div id="flowsFilterDataTypeDiv" class="col-md-3">

                    <h3 class="text-center">Data Types</h3>

                    <div class="checkbox">
                        <label><input type="checkbox" value="">Flows</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">Packets</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">Traffic</label>
                    </div>
                </div><!-- flowsFilterDataTypeDiv  -->

                <div id="flowFilterSourcesDiv" class="col-md-3">

                    <h3 class="text-center">Sources</h3>

                    <div class="form-group">
                        <select multiple class="form-control" id="sourceSelection">
                            <option value="swibi">swibi</option>
                            <option value="tiber">tiber</option>
                            <option value="blablabla">blablabla</option>
                            <option value="shouldComeFromTheServer">shouldComeFromTheServer</option>
                        </select>
                    </div>
                </div><!-- flowFilterSourcesDiv  -->

            </div><!-- flowsFilterDiv  -->

            <div id="statsFilterDiv" class="row well well-sm">

                <div id="statsFilterDateDiv" class="col-md-3">

                    <h3 class="text-center">Date</h3>

                    <div class="form-group">
                        <label for="startDate">From date :</label>
                        <input type="text" class="form-control" id="startDate">
                    </div>
                    <div class="form-group">
                        <label for="endDate">To date :</label>
                        <input type="text" class="form-control" id="endDate">
                    </div>

                    <button type="button" class="btn-primary">Last 24 hours</button>
                    <button type="button" class="btn-primary">Last week</button>

                </div><!-- statsFilterDateDiv  -->

                <div id="statsFilterProtocolDiv" class="col-md-3">

                    <h3 class="text-center">Protocols</h3>

                    <div class="checkbox">
                        <label><input type="checkbox" value="">TCP</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">UDP</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">ICMP</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">Others</label>
                    </div>

                </div><!-- statsFilterProtocolDiv  -->

                <div id="statsFilterDataTypeDiv" class="col-md-3">

                    <h3 class="text-center">Data Types</h3>

                    <div class="checkbox">
                        <label><input type="checkbox" value="">Flows</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">Packets</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="">Traffic</label>
                    </div>
                </div><!-- statsFilterDataTypeDiv  -->

                <div id="statsFilterSourcesDiv" class="col-md-3">

                    <h3 class="text-center">Sources</h3>

                    <div class="form-group">
                        <select multiple class="form-control" id="sourceSelection">
                            <option value="swibi">swibi</option>
                            <option value="tiber">tiber</option>
                            <option value="blablabla">blablabla</option>
                            <option value="shouldComeFromTheServer">shouldComeFromTheServer</option>
                        </select>
                    </div>
                </div><!-- statsFilterSourcesDiv  -->

            </div><!-- statsFilterDiv  -->

        </div><!-- filterDiv  -->

        <div id="contentDiv">

            <div id="graphsContentDiv" class="container-fluid">

                <div class="col-md-2">

                    <div id="graphOptions">
                        <p><h4>Scale :</h4>
                            <input type=radio id="linearScaleBtn" checked name="scale" onchange=adaptScaleToSelection(this)>
                            <label for="linearScaleBtn">Linear</label><br/>
                            <input type=radio id="logarithmicScaleBtn" name="scale" onchange=adaptScaleToSelection(this)>
                            <label for="logarithmicScaleBtn">Logarithmic</label><br/>
                        </p>

                        <p><h4>Type :</h4>
                            <input type=radio id="lineGraphBtn" checked name="type" onchange=adaptGraphTypeToSelection(this)>
                            <label for="lineGraphBtn">Line</label><br/>
                            <input type=radio id="stackedGraphBtn" name="type" onchange=adaptGraphTypeToSelection(this)>
                            <label for="stackedGraphBtn">Stacked</label><br/>
                        </p>

                        <p><h4>Roll period :</h4>
                        <input type=text id="rollPeriod" onchange=adaptGraphRollPeriodToSelection(this)>
                        </p>
                    </div>

                </div>

                <div class="col-md-8">

                    <div id="flowDiv" style="width:1000px; height:400px;"></div>

                </div>

                <div class="col-md-2">

                    <div id="flowStatusDiv"></div>

                </div>

            </div><!-- graphsContentDiv  -->

            <div id="flowsContentDiv">


            </div><!-- flowsContentDiv  -->

            <div id="statsContentDiv">


            </div><!-- statsContentDiv  -->

        </div><!-- contentDiv  -->


		<div id="flowDivContainer">



			<div id="dataOptions">			
				  <input type=checkbox id="0" checked onClick="updateVisibility(this)">
				  <label for="0"> Flows (all)</label><br/>
				  <input type=checkbox id="1" checked onClick="updateVisibility(this)">
				  <label for="1"> Flows TCP</label><br/>
				  <input type=checkbox id="2" checked onClick="updateVisibility(this)">
				  <label for="2"> Flows UDP</label><br/>
				  <input type=checkbox id="3" checked onClick="updateVisibility(this)">
				  <label for="3"> Flows ICMP</label><br/>
				  <input type=checkbox id="4" checked onClick="updateVisibility(this)">
				  <label for="4"> Other Flows</label><br/>
			</div>

		<button type="button" onclick="loadDdata()">Load February !</button>

		</div>

		<script type="text/javascript">

            function changeActiveView(el) {
                $("#graphsFilterDiv").hide();
                $("#flowsFilterDiv").hide();
                $("#statsFilterDiv").hide();
                
                if(el.id == "viewGraphsLink") $("#graphsFilterDiv").show();
                if(el.id == "viewFlowsLink") $("#flowsFilterDiv").show();
                if(el.id == "viewStatsLink") $("#statsFilterDiv").show();
            }

			function loadDdata() {
			  var xhttp = new XMLHttpRequest();
			  xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
				  var newData = this.responseText;
	

			//fg.destroy();

			fg = new Dygraph(
			document.getElementById("flowDiv"),
			newData,
				{
				title : 'Test Graph for time series : flows',
					//axisLabelFontSize : 15,
					ylabel : 'Flows',
					xlabel : 'Date / Time',
					visibility: [true, true, true, true, true],
					labelsKMB : true,
					labelsDiv : document.getElementById("flowStatusDiv"),
					labelsSeparateLines : true,
					legend : 'always',
					//stackedGraph : true,
					logscale : false,
					showRangeSelector: true
				}
			);

			fg.adjustRoll(30);


				}
			  };
			  xhttp.open("GET", "http://localhost/thesis/csv/traffic_february.csv", true);
			  xhttp.send();
			}

			function updateVisibility(el) {
				fg.setVisibility(parseInt(el.id), el.checked);
			}

			function adaptScaleToSelection(el) {
				if(el.id=="logarithmicScaleBtn")
				{
					fg.updateOptions({
		              logscale : true
		            });
				}
				else
				{
					fg.updateOptions({
		              logscale : false
		            });
				}

			}

			function adaptGraphTypeToSelection(el) {
				if(el.id=="stackedGraphBtn")
				{
					fg.updateOptions({
		              stackedGraph : true,
					  fillGraph: true
		            });
				}
				else
				{
					fg.updateOptions({
		              stackedGraph : false,
					  fillGraph: false
		            });
				}

			}

            function adaptGraphRollPeriodToSelection(el) {
                if(el.value > 0)
                {
                    fg.adjustRoll(el.value);
                }
                else
                {
                    fg.adjustRoll(0);
                }
            }

			fg = new Dygraph(
			document.getElementById("flowDiv"),
			"csv/flows.csv",
				{
				title : 'Test Graph for time series : flows',
					//axisLabelFontSize : 15,
					ylabel : 'Flows',
					xlabel : 'Date / Time',
					visibility: [true, true, true, true, true],
					labelsKMB : true,
					labelsDiv : document.getElementById("flowStatusDiv"),
					labelsSeparateLines : true,
					legend : 'always',
					//stackedGraph : true,
					//logscale : true,
					showRangeSelector: true
				}
			);

			fg.adjustRoll(30);

		</script>


	</body>
</html>
